<!DOCTYPE html>
<html>
  <head>
    <title>Chatbot Project</title>
  </head>
  <body>
    <div class="js-container"></div>

    <script src="https://unpkg.com/supersimpledev/react.js"></script>
    <script src="https://unpkg.com/supersimpledev/react-dom.js"></script>

    <script src="https://unpkg.com/supersimpledev/babel.js"></script>
    <script type="text/babel">
      function ChatInput() {
        return (
          <>
            <input 
              placeholder="Send a message to Chatbot" 
              size="30" 
            />
            <button>Send</button>
          </>
        );
      }
      
      function ChatMessage({ message, sender }) {

        return (
          <div>
            {sender === 'robot' && (
              <img src="robot.png" width="50"/>
            )}
            {message}
            {sender === 'user' && (
              <img src="user.png" width="50"/>
            )}
          </div>

        );
      };

      /*
      O React pede que cada elemento de um array tenha uma propriedade 'key' com valor Unique, neste caso adicionamos manualmente os ids para fim de exemplificar, caso contrário ele apresenta um erro no console.
      Também criamos um array de objetos para agrupar as mensagens, objetos compostos por tres propriedades, sendo elas a mensagem e seu conteúdo, o sender que é quem a enviou, e a propriedade 'key' solicitada pelo React para acompanhar as mudanças no array
      */
      function ChatMessages() {
        /*
        Componente criado para segurar o Array que vai agrupar todas as mensagens do chatbot
        */
        const chatMessages = [{
          message: 'hello chatbot',
          sender: 'user',
          id: 'id1'
        }, {
          message: 'Hello! How can i help you?',
          sender: 'robot',
          id: 'id2'
        }, {
          message: 'can you get me todays date?',
          sender: 'user',
          id: 'id3'
        }, {
          message: 'Today is January 9th',
          sender: 'robot',
          id: 'id4'
        }];
      
        function sendMessage() {
          chatMessages.push({
            message: 'test',
            sender: 'user',
            id: crypto.randomUUID()
          });

          console.log(chatMessages)
        }

        return (
          <>
          <button onClick = {sendMessage}>Send Message</button>

          {chatMessages.map((chatMessage) => {
                return (
                  <ChatMessage
                    message = {chatMessage.message}
                    sender = {chatMessage.sender}
                    key = {chatMessage.id}
                  />
                );
          })}
          </>
        )
      }
      function App() {
        return (
          <>
            <ChatInput />
            <ChatMessages />
          </>
        );
      }

      const container = document.querySelector('.js-container');
      ReactDOM.createRoot(container).render(<App />);
    </script>
  </body>
</html>